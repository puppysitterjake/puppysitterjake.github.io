<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>puppysitter üêæ</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
/* =========================
   RESET & BASE
========================= */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Inter,sans-serif;
}

body{
  background:#0b132b;
  color:white;
  scroll-behavior:smooth;
  line-height: 1.5;
}

/* =========================
   NAVBAR
========================= */
.topbar{
  position:absolute;
  top:0;
  width:100%;
  height:70px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 7%;
  z-index:100;
}

.logo{
  font-weight:800;
  font-size:22px;
  letter-spacing:1px;
}

.nav a{
  margin-left:25px;
  color:white;
  text-decoration:none;
  font-size:14px;
  opacity:.85;
  transition:.2s;
}

.nav a:hover{
  opacity:1;
  color: #00d4ff;
}

/* =========================
   HERO SLIDER
========================= */
.hero{
  height:100vh;
  position:relative;
  overflow:hidden;
  background: #000;
}

.hero img{
  position:absolute;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  transition:1.2s;
}

.hero img.active{
  opacity:1;
}

/* =========================
   LAYOUT
========================= */
section{
  max-width:1200px;
  margin:auto;
  padding:80px 20px;
}

h2{
  font-size:32px;
  margin-bottom:35px;
  font-weight:800;
  border-left: 5px solid #00d4ff;
  padding-left: 15px;
}

.grid{
  display:grid;
  gap:26px;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
}

/* =========================
   CARD (NOTICE & YOUTUBE)
========================= */
.card{
  background:white;
  color:#111;
  border-radius:20px;
  overflow:hidden;
  cursor:pointer;
  transition:.25s;
  box-shadow:0 6px 20px rgba(0,0,0,.25);
}

.card:hover{
  transform:translateY(-6px);
}

.thumb{
  width:100%;
  aspect-ratio:16/9;
  object-fit:cover;
  background:#eee;
  display: block;
}

.content{
  padding:16px;
}

.title{
  font-weight:700;
  font-size:15px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.desc{
  font-size:13px;
  color:#666;
  margin-top:6px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* =========================
   BLOG (COLLAPSIBLE)
========================= */
.blog-container {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.blog-item {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  overflow: hidden;
  transition: 0.3s;
}

.blog-header {
  padding: 20px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.blog-header:hover {
  background: rgba(255, 255, 255, 0.08);
}

.blog-title {
  font-weight: 600;
  font-size: 18px;
  color: #00d4ff;
}

.arrow {
  width: 10px;
  height: 10px;
  border-right: 2px solid white;
  border-bottom: 2px solid white;
  transform: rotate(45deg);
  transition: 0.3s;
  margin-right: 10px;
}

.blog-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease-out;
  background: #f9f9f9;
  color: #333;
}

.blog-inner {
  padding: 25px;
}

.blog-inner img {
  max-width: 100%;
  border-radius: 8px;
  margin-bottom: 15px;
  display: block;
}

.blog-item.active .blog-content {
  max-height: 2000px; /* Cho ph√©p n·ªôi dung d√†i */
}

.blog-item.active .arrow {
  transform: rotate(-135deg);
}

/* =========================
   EMBEDS (SPOTIFY/APPLE)
========================= */
.embed{
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 6px 18px rgba(0,0,0,.35);
  background: #282828;
}

#spotify, #apple{ padding-top:100px; }
</style>
</head>

<body>

<header class="topbar">
  <div class="logo">puppysitter üêæ</div>
  <nav class="nav">
    <a href="#notice">Notice</a>
    <a href="#blog">Blog</a>
    <a href="#youtube">YouTube</a>
    <a href="#spotify">Spotify</a>
    <a href="#apple">Apple</a>
  </nav>
</header>

<div id="hero" class="hero"></div>

<section id="notice">
  <h2>Notice</h2>
  <div id="notice-list" class="grid"></div>
</section>

<section id="blog">
  <h2>Blog & Articles</h2>
  <div id="blog-list" class="blog-container"></div>
</section>

<section id="youtube">
  <h2>YouTube</h2>
  <div id="youtube-list" class="grid"></div>
</section>

<section id="spotify">
  <h2>Spotify</h2>
  <div id="spotify-list" class="grid"></div>
</section>

<section id="apple">
  <h2>Apple Music</h2>
  <div id="apple-list" class="grid"></div>
</section>

<script>
/* ================= CONFIG ================= */
const SHEET = "1JbONtH3RWufz3RSgs3EnMV9cYd_37xwBOHgaU2y_yCs";
const API = s => `https://opensheet.elk.sh/${SHEET}/${s}`;
const get = s => fetch(API(s)).then(r => r.json());

/* ================= HELPERS ================= */

// L·∫•y ·∫£nh t·ª´ YouTube ho·∫∑c Link b√°o ch√≠
function getPreview(url, manualImage) {
  if (manualImage) return manualImage;
  
  try {
    const u = new URL(url);
    // YouTube
    if (u.hostname.includes("youtu.be")) 
      return `https://img.youtube.com/vi/${u.pathname.slice(1)}/mqdefault.jpg`;
    if (u.searchParams.get("v")) 
      return `https://img.youtube.com/vi/${u.searchParams.get("v")}/mqdefault.jpg`;
    
    // Link b√°o/Web kh√°c (S·ª≠ d·ª•ng Microlink API)
    return `https://api.microlink.io/?url=${encodeURIComponent(url)}&embed=image.url`;
  } catch(e) {
    return 'https://via.placeholder.com/400x225?text=No+Image';
  }
}

/* ================= CORE FUNCTIONS ================= */

async function loadHero(){
  const d = await get("HERO");
  const box = document.getElementById("hero");
  if(!d.length) return;

  d.forEach((r,i) => {
    const img = document.createElement("img");
    img.src = r.image;
    if(i === 0) img.classList.add("active");
    box.appendChild(img);
  });

  const imgs = box.querySelectorAll("img");
  let i = 0;
  setInterval(() => {
    imgs[i].classList.remove("active");
    i = (i+1) % imgs.length;
    imgs[i].classList.add("active");
  }, 4000);
}

async function loadCards(sheet, id) {
  const d = await get(sheet);
  const box = document.getElementById(id);

  d.forEach(r => {
    const thumb = getPreview(r.url, r.image);
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <img class="thumb" src="${thumb}" onerror="this.src='https://via.placeholder.com/400x225?text=Preview+Unavailable'">
      <div class="content">
        <div class="title">${r.title || "Untitled"}</div>
        <div class="desc">${r.desc || ""}</div>
      </div>
    `;
    div.onclick = () => window.open(r.url);
    box.appendChild(div);
  });
}

async function loadBlog(sheet, id) {
  try {
    const d = await get(sheet);
    const box = document.getElementById(id);
    d.forEach(r => {
      const item = document.createElement("div");
      item.className = "blog-item";
      const content = (r.content || "").replace(/\n/g, '<br>');
      
      item.innerHTML = `
        <div class="blog-header">
          <div class="blog-title">${r.title || "Untitled Article"}</div>
          <div class="arrow"></div>
        </div>
        <div class="blog-content">
          <div class="blog-inner">
            ${r.image ? `<img src="${r.image}">` : ""}
            <div class="blog-text">${content}</div>
          </div>
        </div>
      `;
      item.querySelector(".blog-header").onclick = () => item.classList.toggle("active");
      box.appendChild(item);
    });
  } catch(e) { console.error("Blog load error", e); }
}

async function loadIframe(sheet, id) {
  const d = await get(sheet);
  const box = document.getElementById(id);
  d.forEach(r => {
    if(r.iframe) {
      const div = document.createElement("div");
      div.className = "embed";
      div.innerHTML = r.iframe;
      box.appendChild(div);
    }
  });
}

/* ================= INITIALIZE ================= */

loadHero();
loadCards("NOTICE", "notice-list");
loadBlog("BLOG", "blog-list");
loadCards("YOUTUBE", "youtube-list");
loadIframe("SPOTIFY", "spotify-list");
loadIframe("APPLE", "apple-list");

</script>

</body>
</html>
