<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>puppysitter üêæ</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --primary: #00d4ff;
  --bg: #0b132b;
  --text: #ffffff;
  --card-bg: #ffffff;
  --font: 'Quicksand', sans-serif;
}

/* Reset & C∆° b·∫£n */
* { margin:0; padding:0; box-sizing:border-box; font-family: var(--font); }
html { scroll-behavior: smooth; }
body { background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; }

/* =========================
   1. NAVBAR & MOBILE MENU
========================= */
.topbar {
  position: fixed; top: 0; width: 100%; height: 70px;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 5%; z-index: 1000; transition: 0.3s ease;
}
.topbar.scrolled { 
  background: rgba(11, 19, 43, 0.95); 
  backdrop-filter: blur(10px); 
  height: 60px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}
.logo { font-weight: 700; font-size: 22px; color: var(--text); text-decoration: none; }

.nav { display: flex; gap: 25px; }
.nav a { 
  color: #fff; text-decoration: none; font-weight: 600; 
  font-size: 14px; opacity: 0.8; transition: 0.3s;
}
.nav a:hover { opacity: 1; color: var(--primary); }

/* Hamburger Icon */
.menu-btn { display: none; cursor: pointer; z-index: 1001; padding: 10px; }
.menu-btn div { width: 25px; height: 2px; background: #fff; margin: 6px 0; transition: 0.3s; }

/* =========================
   2. HERO FULL SCREEN
========================= */
.hero { height: 100vh; width: 100%; position: relative; overflow: hidden; background: #000; }
.hero img { 
  position: absolute; width: 100%; height: 100%; 
  object-fit: cover; opacity: 0; transition: 1.5s ease-in-out; 
}
.hero img.active { opacity: 1; }
.hero::after { 
  content: ''; position: absolute; bottom: 0; left: 0; 
  width: 100%; height: 40%; 
  background: linear-gradient(to top, var(--bg), transparent); 
}

/* =========================
   3. C·∫§U TR√öC LAYOUT
========================= */
section { max-width: 1200px; margin: auto; padding: 80px 20px; }
h2 { 
  font-size: 28px; margin-bottom: 35px; 
  border-left: 5px solid var(--primary); padding-left: 15px; 
}

/* Horizontal Scroll (Cho YouTube & Music) */
.horizontal-scroll {
  display: flex; gap: 20px; overflow-x: auto; padding-bottom: 20px;
  scrollbar-width: none; -ms-overflow-style: none; /* ·∫®n scrollbar Firefox/IE */
  -webkit-overflow-scrolling: touch;
}
.horizontal-scroll::-webkit-scrollbar { display: none; } /* ·∫®n scrollbar Chrome/Safari */

/* Playlist Sub-section */
.playlist-group { margin-bottom: 45px; }
.playlist-title { 
  font-size: 15px; color: var(--primary); margin-bottom: 15px; 
  font-weight: 700; text-transform: uppercase; letter-spacing: 2px;
  display: flex; align-items: center; gap: 15px;
}
.playlist-title::after { content: ''; flex: 1; height: 1px; background: rgba(255,255,255,0.1); }

/* =========================
   4. TH·∫∫ CARD (COZY STYLE)
========================= */
.card-item { 
  flex: 0 0 300px; /* ƒê·ªô r·ªông th·∫ª YouTube */
  background: var(--card-bg); color: #222; 
  border-radius: 20px; overflow: hidden; 
  cursor: pointer; transition: 0.3s ease; 
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}
.card-item:hover { transform: translateY(-8px); }
.thumb { width: 100%; aspect-ratio: 16/9; object-fit: cover; display: block; }
.card-content { padding: 15px; }
.card-title { 
  font-weight: 700; font-size: 15px; line-height: 1.4; 
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; 
}

/* Grid cho Notice */
.grid-notice { display: grid; gap: 20px; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }

/* =========================
   5. BLOG & MUSIC
========================= */
.blog-item { background: rgba(255,255,255,0.05); border-radius: 15px; margin-bottom: 15px; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); }
.blog-header { padding: 22px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
.blog-header:hover { background: rgba(255,255,255,0.02); }
.blog-content { max-height: 0; overflow: hidden; transition: 0.5s ease; background: #fff; color: #333; }
.blog-item.active .blog-content { max-height: 3000px; }
.blog-inner { padding: 25px; font-size: 16px; }

.embed-item { flex: 0 0 350px; border-radius: 20px; overflow: hidden; background: #000; }

/* =========================
   6. MOBILE RESPONSIVE
========================= */
@media (max-width: 768px) {
  .menu-btn { display: block; }
  .nav {
    position: fixed; top: 0; right: -100%; width: 80%; height: 100vh;
    background: #0b132b; flex-direction: column; align-items: center; 
    justify-content: center; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); 
    z-index: 1000; box-shadow: -10px 0 30px rgba(0,0,0,0.5);
  }
  .nav.open { right: 0; }
  .nav a { font-size: 24px; margin: 15px 0; }
  
  /* X cho Menu */
  .menu-btn.open .line1 { transform: rotate(45deg) translate(5px, 6px); }
  .menu-btn.open .line2 { opacity: 0; }
  .menu-btn.open .line3 { transform: rotate(-45deg) translate(5px, -7px); }

  .hero { height: 75vh; }
  section { padding: 60px 20px; }
  .card-item { flex: 0 0 260px; }
  .embed-item { flex: 0 0 280px; }
}
</style>
</head>
<body>

<header class="topbar" id="navbar">
  <a href="#" class="logo">PUPPYSITTER üêæ</a>
  <div class="menu-btn" id="menu-toggle">
    <div class="line1"></div><div class="line2"></div><div class="line3"></div>
  </div>
  <nav class="nav" id="nav-menu">
    <a href="#notice" onclick="toggleMenu()">Notice</a>
    <a href="#blog" onclick="toggleMenu()">Blog</a>
    <a href="#youtube" onclick="toggleMenu()">YouTube</a>
    <a href="#spotify" onclick="toggleMenu()">Spotify</a>
    <a href="#apple" onclick="toggleMenu()">Apple</a>
  </nav>
</header>

<div class="hero" id="hero-box"></div>

<section id="notice">
  <h2>Notice</h2>
  <div id="notice-list" class="grid-notice"></div>
</section>

<section id="blog">
  <h2>Blog</h2>
  <div id="blog-list"></div>
</section>

<section id="youtube">
  <h2>YouTube Content</h2>
  <div id="youtube-container"></div>
</section>

<section id="spotify">
  <h2>Spotify</h2>
  <div id="spotify-list" class="horizontal-scroll"></div>
</section>

<section id="apple">
  <h2>Apple Music</h2>
  <div id="apple-list" class="horizontal-scroll"></div>
</section>

<script>
const SHEET_ID = "1JbONtH3RWufz3RSgs3EnMV9cYd_37xwBOHgaU2y_yCs";
const api = s => fetch(`https://opensheet.elk.sh/${SHEET_ID}/${s}`).then(r => r.json());

/* --- UI CONTROLS --- */
const menuToggle = document.getElementById('menu-toggle');
const navMenu = document.getElementById('nav-menu');

function toggleMenu() {
  menuToggle.classList.toggle('open');
  navMenu.classList.toggle('open');
}
menuToggle.onclick = toggleMenu;

window.onscroll = () => {
  document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 50);
};

/* --- DATA LOADING --- */

// 1. Load Hero
async function loadHero(){
  try {
    const data = await api("HERO");
    const box = document.getElementById("hero-box");
    data.forEach((item, i) => {
      const img = document.createElement("img");
      img.src = item.image;
      if(i === 0) img.classList.add("active");
      box.appendChild(img);
    });
    let imgs = box.querySelectorAll('img'), cur = 0;
    if(imgs.length > 1) {
      setInterval(() => {
        imgs[cur].classList.remove('active');
        cur = (cur + 1) % imgs.length;
        imgs[cur].classList.add('active');
      }, 5000);
    }
  } catch(e) { console.error("Hero error:", e); }
}

// 2. Helper l·∫•y ·∫£nh preview
function getPreview(url, manualImg) {
  if(manualImg && manualImg.trim() !== "") return manualImg;
  try {
    const u = new URL(url);
    if(u.hostname.includes("youtu")) {
      const vid = u.searchParams.get("v") || u.pathname.slice(1);
      return `https://img.youtube.com/vi/${vid}/mqdefault.jpg`;
    }
    return `https://api.microlink.io/?url=${encodeURIComponent(url)}&embed=image.url`;
  } catch(e) { return 'https://via.placeholder.com/400x225?text=No+Image'; }
}

// 3. Load Notice (D·∫°ng Grid)
async function loadNotice() {
  const data = await api("NOTICE");
  const box = document.getElementById("notice-list");
  data.forEach(r => {
    const card = document.createElement("div");
    card.className = "card-item";
    card.style.flex = "unset"; // Grid kh√¥ng c·∫ßn flex-basis
    card.innerHTML = `
      <img class="thumb" src="${getPreview(r.url, r.image)}">
      <div class="card-content"><div class="card-title">${r.title || ''}</div></div>
    `;
    card.onclick = () => window.open(r.url);
    box.appendChild(card);
  });
}

// 4. Load Blog (D·∫°ng Collapse)
async function loadBlog() {
  const data = await api("BLOG");
  const box = document.getElementById("blog-list");
  data.forEach(r => {
    const item = document.createElement("div");
    item.className = "blog-item";
    item.innerHTML = `
      <div class="blog-header">
        <div class="blog-title" style="font-weight:600">${r.title}</div>
        <span style="font-size:20px">+</span>
      </div>
      <div class="blog-content">
        <div class="blog-inner">
          ${r.image ? `<img src="${r.image}" style="width:100%;border-radius:12px;margin-bottom:20px">` : ''}
          <p>${r.content ? r.content.replace(/\n/g, '<br>') : ''}</p>
        </div>
      </div>`;
    item.querySelector('.blog-header').onclick = () => item.classList.toggle('active');
    box.appendChild(item);
  });
}

// 5. Load YouTube (Chia Playlist & Cu·ªôn ngang)
async function loadYoutube() {
  const data = await api("YOUTUBE");
  const container = document.getElementById("youtube-container");
  
  // Nh√≥m theo playlist (Album, Vlog, Show...)
  const groups = data.reduce((acc, vid) => {
    const p = vid.playlist || "Others";
    if (!acc[p]) acc[p] = [];
    acc[p].push(vid);
    return acc;
  }, {});

  for (const pName in groups) {
    const groupDiv = document.createElement("div");
    groupDiv.className = "playlist-group";
    groupDiv.innerHTML = `
      <div class="playlist-title">${pName}</div>
      <div class="horizontal-scroll"></div>
    `;
    const scrollBox = groupDiv.querySelector(".horizontal-scroll");

    groups[pName].forEach(r => {
      const card = document.createElement("div");
      card.className = "card-item";
      card.innerHTML = `
        <img class="thumb" src="${getPreview(r.url, r.image)}">
        <div class="card-content"><div class="card-title">${r.title || ''}</div></div>
      `;
      card.onclick = () => window.open(r.url);
      scrollBox.appendChild(card);
    });
    container.appendChild(groupDiv);
  }
}

// 6. Load Music Iframe (Spotify & Apple)
async function loadMusic(sheet, id) {
  const data = await api(sheet);
  const box = document.getElementById(id);
  data.forEach(r => { 
    if(r.iframe) {
      const div = document.createElement("div");
      div.className = "embed-item";
      div.innerHTML = r.iframe;
      box.appendChild(div);
    }
  });
}

/* --- INIT --- */
loadHero();
loadNotice();
loadBlog();
loadYoutube();
loadMusic("SPOTIFY", "spotify-list");
loadMusic("APPLE", "apple-list");
</script>
</body>
</html>
