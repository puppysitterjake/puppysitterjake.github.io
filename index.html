<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>puppysitter üêæ</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --primary: #00d4ff;
  --bg: #0b132b;
  --glass: rgba(255, 255, 255, 0.1);
  --font: 'Quicksand', sans-serif;
}

* { margin:0; padding:0; box-sizing:border-box; font-family: var(--font); }
body { background: var(--bg); color: #fff; line-height: 1.6; overflow-x: hidden; }

/* =========================
   1. NAVBAR & HAMBURGER
========================= */
.topbar {
  position: fixed; top: 0; width: 100%; height: 70px;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 7%; z-index: 1000; transition: 0.4s;
}
.topbar.scrolled { background: rgba(11, 19, 43, 0.95); backdrop-filter: blur(10px); height: 60px; }
.logo { font-weight: 800; font-size: 24px; color: #fff; z-index: 1001; }

.nav { display: flex; gap: 25px; }
.nav a { color: #fff; text-decoration: none; font-weight: 600; font-size: 14px; transition: 0.3s; text-transform: uppercase; }
.nav a:hover { color: var(--primary); }

.menu-btn { display: none; cursor: pointer; z-index: 1001; flex-direction: column; gap: 5px; }
.menu-btn span { width: 25px; height: 3px; background: #fff; transition: 0.3s; border-radius: 2px; }

/* =========================
   2. HERO FULLSCREEN
========================= */
.hero { height: 100vh; width: 100%; position: relative; overflow: hidden; }
.hero img { position: absolute; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: 1.5s ease-in-out; }
.hero img.active { opacity: 1; transform: scale(1.05); }
.hero::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 50%; background: linear-gradient(to top, var(--bg), transparent); }

/* =========================
   3. SECTIONS
========================= */
section { max-width: 1200px; margin: auto; padding: 80px 20px; }
h2 { font-size: 28px; margin-bottom: 30px; font-weight: 800; border-left: 6px solid var(--primary); padding-left: 15px; }

/* Grid cho Notice & Youtube */
.grid { display: grid; gap: 20px; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
.card { background: #fff; color: #111; border-radius: 20px; overflow: hidden; cursor: pointer; transition: 0.4s; box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
.card:hover { transform: translateY(-8px); }
.thumb { width: 100%; aspect-ratio: 16/9; object-fit: cover; }
.content { padding: 15px; }

/* =========================
   4. BLOG
========================= */
#blog-list { display: flex; flex-direction: column; gap: 12px; }
.blog-item { background: var(--glass); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; overflow: hidden; }
.blog-header { padding: 18px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
.blog-content { max-height: 0; overflow: hidden; transition: 0.5s ease; background: #fff; color: #222; }
.blog-item.active .blog-content { max-height: 3000px; }
.blog-inner { padding: 20px; }

/* =========================
   5. MUSIC (NH∆Ø ·∫¢NH M·∫™U - CU·ªòN NGANG)
========================= */
.music-scroll {
  display: flex;
  gap: 20px;
  overflow-x: auto;
  padding: 10px 5px 20px 5px;
  /* Thanh cu·ªôn m∆∞·ª£t tr√™n mobile */
  -webkit-overflow-scrolling: touch;
}

/* ·∫®n thanh cu·ªôn m·∫∑c ƒë·ªãnh ƒë·ªÉ giao di·ªán s·∫°ch h∆°n */
.music-scroll::-webkit-scrollbar { height: 6px; }
.music-scroll::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
.music-scroll::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

.embed-item {
  flex: 0 0 350px; /* ƒê·ªô r·ªông c·ªë ƒë·ªãnh c·ªßa m·ªói th·∫ª nh·∫°c (gi·ªëng ·∫£nh m·∫´u) */
  border-radius: 15px;
  overflow: hidden;
  background: #000;
  box-shadow: 0 10px 20px rgba(0,0,0,0.4);
}

/* =========================
   6. MOBILE RESPONSIVE
========================= */
@media (max-width: 768px) {
  .menu-btn { display: flex; }
  .nav { position: fixed; top: 0; right: -100%; width: 100%; height: 100vh; background: rgba(11, 19, 43, 0.98); backdrop-filter: blur(15px); flex-direction: column; align-items: center; justify-content: center; transition: 0.5s; z-index: 1000; }
  .nav.open { right: 0; }
  .nav a { font-size: 22px; margin: 12px 0; }
  .menu-btn.open span:nth-child(1) { transform: rotate(45deg) translate(5px, 6px); }
  .menu-btn.open span:nth-child(2) { opacity: 0; }
  .menu-btn.open span:nth-child(3) { transform: rotate(-45deg) translate(5px, -7px); }

  .hero { height: 70vh; }
  section { padding: 50px 15px; }
  .embed-item { flex: 0 0 280px; } /* Tr√™n mobile th·∫ª nh·∫°c nh·ªè l·∫°i m·ªôt ch√∫t */
}
</style>
</head>
<body>

<header class="topbar" id="navbar">
  <div class="logo">PUPPYSITTER üêæ</div>
  <div class="menu-btn" id="menu-btn"><span></span><span></span><span></span></div>
  <nav class="nav" id="nav-links">
    <a href="#notice" onclick="toggleMenu()">NOTICE</a>
    <a href="#blog" onclick="toggleMenu()">BLOG</a>
    <a href="#youtube" onclick="toggleMenu()">YOUTUBE</a>
    <a href="#spotify" onclick="toggleMenu()">SPOTIFY</a>
    <a href="#apple" onclick="toggleMenu()">APPLE</a>
  </nav>
</header>

<div class="hero" id="hero-box"></div>

<section id="notice">
  <h2>Notice</h2>
  <div id="notice-list" class="grid"></div>
</section>

<section id="blog">
  <h2>Blog & Stories</h2>
  <div id="blog-list"></div>
</section>

<section id="youtube">
  <h2>YouTube</h2>
  <div id="youtube-list" class="grid"></div>
</section>

<section id="spotify">
  <h2>üü¢ Spotify</h2>
  <div id="spotify-list" class="music-scroll"></div>
</section>

<section id="apple">
  <h2>üçé Apple Music</h2>
  <div id="apple-list" class="music-scroll"></div>
</section>

<script>
const SHEET = "1JbONtH3RWufz3RSgs3EnMV9cYd_37xwBOHgaU2y_yCs";
const get = s => fetch(`https://opensheet.elk.sh/${SHEET}/${s}`).then(r => r.json());

/* MENU LOGIC */
const menuBtn = document.getElementById('menu-btn');
const navLinks = document.getElementById('nav-links');
function toggleMenu() { menuBtn.classList.toggle('open'); navLinks.classList.toggle('open'); }
menuBtn.addEventListener('click', toggleMenu);

window.onscroll = () => {
  const nav = document.getElementById('navbar');
  if (window.scrollY > 50) nav.classList.add('scrolled');
  else nav.classList.remove('scrolled');
};

/* HERO */
async function loadHero(){
  try {
    const d = await get("HERO");
    const box = document.getElementById("hero-box");
    d.forEach((r, i) => {
      const img = document.createElement("img");
      img.src = r.image;
      if(i === 0) img.classList.add("active");
      box.appendChild(img);
    });
    let imgs = box.querySelectorAll('img'), cur = 0;
    if(imgs.length > 1) {
      setInterval(() => {
        imgs[cur].classList.remove('active');
        cur = (cur + 1) % imgs.length;
        imgs[cur].classList.add('active');
      }, 5000);
    }
  } catch(e){}
}

/* CARDS & PREVIEW */
function getPreview(url, manualImg) {
  if(manualImg && manualImg.trim() !== "") return manualImg;
  try {
    const u = new URL(url);
    if(u.hostname.includes("youtu.be")) return `https://img.youtube.com/vi/${u.pathname.slice(1)}/maxresdefault.jpg`;
    if(u.searchParams.get("v")) return `https://img.youtube.com/vi/${u.searchParams.get("v")}/maxresdefault.jpg`;
    return `https://api.microlink.io/?url=${encodeURIComponent(url)}&embed=image.url`;
  } catch(e) { return 'https://via.placeholder.com/600x340'; }
}

async function loadCards(sheet, id) {
  const d = await get(sheet);
  const box = document.getElementById(id);
  d.forEach(r => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `<img class="thumb" src="${getPreview(r.url, r.image)}" onerror="this.src='https://via.placeholder.com/600x340'"><div class="content"><div class="title" style="font-weight:700">${r.title || ''}</div><div class="desc" style="font-size:14px;color:#666">${r.desc || ''}</div></div>`;
    div.onclick = () => window.open(r.url);
    box.appendChild(div);
  });
}

/* BLOG */
async function loadBlog() {
  const d = await get("BLOG");
  const box = document.getElementById("blog-list");
  d.forEach(r => {
    const item = document.createElement("div");
    item.className = "blog-item";
    item.innerHTML = `<div class="blog-header"><div class="blog-title">${r.title}</div><div class="arrow" style="width:10px;height:10px;border-right:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(45deg);transition:0.3s"></div></div><div class="blog-content"><div class="blog-inner">${r.image ? `<img src="${r.image}" style="width:100%;border-radius:15px;margin-bottom:15px">` : ''}<p>${r.content.replace(/\n/g, '<br>')}</p></div></div>`;
    item.querySelector('.blog-header').onclick = () => {
      item.classList.toggle('active');
      const arrow = item.querySelector('.arrow');
      arrow.style.transform = item.classList.contains('active') ? 'rotate(-135deg)' : 'rotate(45deg)';
    };
    box.appendChild(item);
  });
}

/* MUSIC (HORIZONTAL SCROLL) */
async function loadIframe(sheet, id) {
  const d = await get(sheet);
  const box = document.getElementById(id);
  d.forEach(r => { 
    if(r.iframe) {
      const div = document.createElement("div");
      div.className = "embed-item";
      div.innerHTML = r.iframe; 
      box.appendChild(div);
    }
  });
}

loadHero();
loadCards("NOTICE", "notice-list");
loadBlog();
loadCards("YOUTUBE", "youtube-list");
loadIframe("SPOTIFY", "spotify-list");
loadIframe("APPLE", "apple-list");
</script>
</body>
</html>
