<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>puppysitter üêæ | Official Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --primary: #00d4ff;
  --bg: #0b132b;
  --card-bg: #16213e;
  --text: #ffffff;
  --font: 'Quicksand', sans-serif;
}

/* Reset & Base */
* { margin:0; padding:0; box-sizing:border-box; font-family: var(--font); }
html { scroll-behavior: smooth; }
body { background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; }

/* Navbar */
.topbar {
  position: fixed; top: 0; width: 100%; height: 70px;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 5%; z-index: 1000; transition: 0.3s;
}
.topbar.scrolled { background: rgba(11, 19, 43, 0.95); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(0,212,255,0.1); }
.logo { font-weight: 700; font-size: 20px; letter-spacing: 1px; }
.nav a { color: #fff; text-decoration: none; margin-left: 20px; font-size: 13px; font-weight: 600; opacity: 0.7; transition: 0.3s; }
.nav a:hover { opacity: 1; color: var(--primary); }

/* Hero Section */
.hero { height: 80vh; position: relative; overflow: hidden; background: #000; }
.hero img { position: absolute; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: 1.5s ease-in-out; }
.hero img.active { opacity: 0.6; }
.hero::after { content: ''; position: absolute; bottom: 0; width: 100%; height: 50%; background: linear-gradient(to top, var(--bg), transparent); }

/* Section Style */
section { max-width: 1200px; margin: auto; padding: 80px 20px; }
h2 { font-size: 26px; margin-bottom: 40px; display: flex; align-items: center; gap: 12px; }
h2::before { content: ''; width: 5px; height: 26px; background: var(--primary); border-radius: 10px; }

/* Blog - Smart Scroll */
.blog-wrapper { max-height: 450px; overflow-y: auto; padding-right: 15px; }
.blog-wrapper::-webkit-scrollbar { width: 4px; }
.blog-wrapper::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }
.blog-item { background: rgba(255,255,255,0.03); border: 1px solid rgba(0,212,255,0.1); border-radius: 15px; margin-bottom: 15px; transition: 0.3s; }
.blog-header { padding: 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
.blog-content { max-height: 0; overflow: hidden; transition: 0.5s ease; background: #fff; color: #333; }
.blog-item.active .blog-content { max-height: 2000px; }
.blog-inner { padding: 25px; }

/* Horizontal Scroll */
.horizontal-scroll { display: flex; gap: 20px; overflow-x: auto; padding-bottom: 20px; scrollbar-width: none; -webkit-overflow-scrolling: touch; }
.horizontal-scroll::-webkit-scrollbar { display: none; }
.playlist-group { margin-bottom: 50px; }
.playlist-label { font-size: 13px; color: var(--primary); font-weight: 700; text-transform: uppercase; margin-bottom: 15px; letter-spacing: 2px; }

/* Cards */
.card { flex: 0 0 300px; background: var(--card-bg); border-radius: 18px; overflow: hidden; cursor: pointer; transition: 0.3s; border: 1px solid rgba(255,255,255,0.05); }
.card:hover { transform: translateY(-8px); border-color: var(--primary); }
.thumb { width: 100%; aspect-ratio: 16/9; object-fit: cover; display: block; background: #000; }
.card-info { padding: 15px; }
.card-title { font-weight: 700; font-size: 14px; margin-bottom: 10px; height: 40px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
.card-stats { display: flex; justify-content: space-between; font-size: 11px; opacity: 0.6; font-weight: 600; }

/* Music Iframe */
.embed-item { flex: 0 0 340px; border-radius: 18px; overflow: hidden; background: #000; }

@media (max-width: 768px) {
  .hero { height: 60vh; }
  .card { flex: 0 0 260px; }
  .embed-item { flex: 0 0 280px; }
  .nav { display: none; }
}
</style>
</head>
<body>

<header class="topbar" id="navbar">
  <div class="logo">PUPPYSITTER üêæ</div>
  <nav class="nav">
    <a href="#blog">BLOG</a>
    <a href="#youtube">YOUTUBE</a>
    <a href="#music">MUSIC</a>
  </nav>
</header>

<div class="hero" id="hero-box"></div>

<section id="blog">
  <h2>Inside My Stories</h2>
  <div class="blog-wrapper" id="blog-list"></div>
</section>

<section id="youtube">
  <h2>Creative Studio</h2>
  <div id="youtube-container"></div>
</section>

<section id="music">
  <h2>Streaming Everywhere</h2>
  <div class="horizontal-scroll" id="music-list"></div>
</section>

<script>
const SHEET_ID = "1JbONtH3RWufz3RSgs3EnMV9cYd_37xwBOHgaU2y_yCs";
const api = s => fetch(`https://opensheet.elk.sh/${SHEET_ID}/${s}`).then(r => r.json());

// H√†m quan tr·ªçng ƒë·ªÉ l·∫•y thumbnail ƒë√∫ng c√°ch
function getYoutubeID(url) {
  if (!url) return '';
  const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
  const match = url.match(regExp);
  return (match && match[2].length === 11) ? match[2] : null;
}

async function loadHero(){
  try {
    const d = await api("HERO");
    const box = document.getElementById("hero-box");
    d.forEach((item, i) => {
      const img = document.createElement("img");
      img.src = item.image;
      if(i === 0) img.classList.add("active");
      box.appendChild(img);
    });
    let imgs = box.querySelectorAll('img'), cur = 0;
    if(imgs.length > 1) {
      setInterval(() => {
        imgs[cur].classList.remove('active');
        cur = (cur + 1) % imgs.length;
        imgs[cur].classList.add('active');
      }, 5000);
    }
  } catch(e) {}
}

async function loadBlog() {
  try {
    const d = await api("BLOG");
    const box = document.getElementById("blog-list");
    d.forEach(r => {
      const div = document.createElement("div");
      div.className = "blog-item";
      div.innerHTML = `
        <div class="blog-header"><span style="font-weight:700">${r.title}</span><span style="color:var(--primary); font-size:12px">Read More +</span></div>
        <div class="blog-content"><div class="blog-inner">
          ${r.image ? `<img src="${r.image}" style="width:100%; border-radius:12px; margin-bottom:15px">` : ''}
          <p>${r.content ? r.content.replace(/\n/g, '<br>') : ''}</p>
        </div></div>`;
      div.onclick = () => div.classList.toggle('active');
      box.appendChild(div);
    });
  } catch(e) {}
}

async function loadYoutube() {
  try {
    const d = await api("YOUTUBE");
    const container = document.getElementById("youtube-container");
    const groups = d.reduce((acc, v) => {
      const p = v.playlist || "General";
      if(!acc[p]) acc[p] = [];
      acc[p].push(v);
      return acc;
    }, {});

    for (const p in groups) {
      const group = document.createElement("div");
      group.className = "playlist-group";
      group.innerHTML = `<div class="playlist-label">${p}</div><div class="horizontal-scroll"></div>`;
      const scroll = group.querySelector(".horizontal-scroll");
      
      groups[p].forEach(v => {
        const vid = getYoutubeID(v.url);
        const thumbUrl = vid ? `https://img.youtube.com/vi/${vid}/mqdefault.jpg` : 'https://via.placeholder.com/400x225?text=No+Thumbnail';
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <img class="thumb" src="${thumbUrl}">
          <div class="card-info">
            <div class="card-title">${v.title || 'Untitled Video'}</div>
            <div class="card-stats">
              <span>üìÖ ${v.date || ''}</span>
              <span style="color:var(--primary)">üëÅÔ∏è ${Number(v.views || 0).toLocaleString()}</span>
            </div>
          </div>`;
        card.onclick = () => window.open(v.url);
        scroll.appendChild(card);
      });
      container.appendChild(group);
    }
  } catch(e) {}
}

async function loadMusic() {
  try {
    const spot = await api("SPOTIFY");
    const apple = await api("APPLE");
    const box = document.getElementById("music-list");
    [...spot, ...apple].forEach(m => {
      if(m.iframe) {
        const div = document.createElement("div");
        div.className = "embed-item";
        div.innerHTML = m.iframe;
        box.appendChild(div);
      }
    });
  } catch(e) {}
}

window.onscroll = () => document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 50);

// Kh·ªüi ch·∫°y to√†n b·ªô
loadHero();
loadBlog();
loadYoutube();
loadMusic();
</script>
</body>
</html>
